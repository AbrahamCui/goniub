package com.deep007.goniub.hybridtest;

import com.deep007.goniub.DefaultHttpDownloader;
import com.deep007.goniub.request.PageRequest;
import com.deep007.goniub.response.Page;
import com.deep007.goniub.util.CURLUtils;
import org.junit.jupiter.api.Test;

public class CURLUtilsTest {
	@Test
	public void main() throws InterruptedException {
		Thread thread = new Thread(() -> {
			try {
				Thread.sleep(10000);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		});
		//thread.start();
		Thread.sleep(1000);
		System.out.println(thread.isAlive());

	}
	@Test
	public  void main2() {
		//String curlCommand = "curl -H 'uin: ' -H 'Cookie: lskey=;skey=;uin=; luin=;logintype=0; main_login=;' -H 'RecentUserOperation: 2_Splash' -H 'Referer: http://inews.qq.com/inews/android/' -H 'User-Agent: %E8%85%BE%E8%AE%AF%E6%96%B0%E9%97%BB6140(android)' -H 'Host: r.inews.qq.com' -H 'client-ip-v4: 222.67.15.160' --data \"lon=120.585761&cityList=news_news_suz&loc_street=%E4%B8%89%E9%A6%99%E8%B7%AF&lastLocatingTime=1591271204&village_name=Unknown&loc_city_name=%E8%8B%8F%E5%B7%9E%E5%B8%82&provinceId=6&loc_catalog=%E6%9C%BA%E6%9E%84%E5%9B%A2%E4%BD%93%3A%E6%94%BF%E5%BA%9C%E6%9C%BA%E5%85%B3&loc_province_name=%E6%B1%9F%E8%8B%8F%E7%9C%81&loc_name=%E8%8B%8F%E5%B7%9E%E5%B8%82%E6%94%BF%E5%BA%9C&town_name=%E9%87%91%E9%98%8A%E8%A1%97%E9%81%93&loc_district_name=%E5%A7%91%E8%8B%8F%E5%8C%BA&loc_addr=%E6%B1%9F%E8%8B%8F%E7%9C%81%E8%8B%8F%E5%B7%9E%E5%B8%82%E5%A7%91%E8%8B%8F%E5%8C%BA%E4%B8%89%E9%A6%99%E8%B7%AF998%E5%8F%B7&lat=31.297211&cityId=39&qqnetwork=wifi&real_device_width=3.0&net_bssid=00%3AFF%3AC3%3A08%3A2C%3ABB&isElderMode=0&currentChannelId=news_news_top&currentSetId=group_news&islite=0&global_session_id=1591272270373&screen_width=720&isClosePersonalized=0&imsi=460070810941213&currentTabId=news_news&net_slot=0&qn-time=1591272275404&mac=08%3A6D%3A41%3AD5%3A7A%3A6A&activefrom=icon&net_ssid=CHINA%20MOBILE&qimei=864394010081091&store=11732&origin_imei=864394010081091&network_type=wifi&origCurrentTab=top&net_apn=0&is_special_device=1&adcode=320508&mid=c774790e0565e0d88d34b08b58a0eebe36592e15&dpi=307.0&isColdLaunch=1&net_proxy=DIRECT&isMainUserLogin=0&apptype=android&hw=samsung_SM-N950N&omgbizid=36fc96d83c0fd64e7b0a545c6a44ec578cf10050215504&videoAutoPlay=1&isoem=0&cpuabi=armeabi-v7a&startTimestamp=1591272270&pagestartfrom=icon&screen_height=1280&top_activity=SplashActivity&preStartTimestamp=1591272190&real_device_height=5.33&global_info=1%7C1%7C1%7C1%7C1%7C13%7C9%7C1%7C0%7C6%7C1%7C1%7C1%7C%7C0%7CJ060P700000000%3AJ060P600000000%3AJ060P400000000%3AJ060P300000000%3AJ060P200000000%3AJ060P100000000%3AJ060P090000000%3AJ060P080000000%3AJ060P070000000%3AJ060P060000000%3AJ060P050000000%3AJ060P040000000%3AJ060P030000000%3AJ060P020000000%3AJ060P010000000%3AJ060P000000000%3AA060P099302101%3AA060P016085901%3AJ403P700000000%3AJ403P600000000%3AJ403P400000000%3AB403P300415502%3AJ403P100000000%3AJ403P010000000%3AA403P000373302%3AA403P602218702%3AJ402P300000000%3AB402P100399702%3AA402P000406202%3AJ404P200000000%3AJ404P010000000%3AB404P000338902%3AA404P002308201%3AB267P300393803%3AA267P200418401%3AB267P100427703%3AJ267P090000000%3AJ267P020000000%3AJ267P010000000%3AB267P000388907%3AJ401P100000000%3AJ401P000000000%3AA064P000389004%3AJ310P400000000%3AB310P100404404%3AJ310P030000000%3AJ310P010000000%3AJ310P000000000%3AB054P400313103%3AA054P300413601%3AJ054P200000000%3AB054P100405903%3AA054P090406002%3AB054P070391803%3AA054P000399101%3AA406P200420301%3AA406P000426102%3AJ405P200000000%3AA405P100426302%3AB405P090414002%3AB405P080414102%3AB405P070415604%3AB405P060423602%3AA405P000374501%3AJ055P070000000%3AJ055P000000000%3AJ601P900000000%3AJ601P800000000%3AB601P700369702%3AB601P600338204%3AJ601P500000000%3AA601P400424101%3AJ601P300000000%3AB601P200096102%3AB601P100360803%3AJ601P000000000%3AJ601P908000000%3AJ601P907000000%3AJ601P906000000%3AJ601P905000000%3AJ601P903000000%3AA601P902266601%3AA601P815363101%3AJ601P813000000%3AJ601P812000000%3AJ601P811000000%3AJ601P704000000%3AJ601P623000000%3AA601P622269601%3AA601P620269601%3AA601P504377401%3AA601P112360801%3AJ601P111000000%3AJ601P110000000%3AA601P105118803%3AA601P022299301%3AA601P019237403%3AA601P016212405%3AJ601P006000000%3AB074P200238202%3AB602P900370104%3AJ602P700000000%3AB602P600421702%3AJ602P500000000%3AA602P400378602%3AA602P300403703%3AJ602P200000000%3AJ602P100000000%3AB602P000403802%3AA602P901257901%3AA602P710324701%3AA602P702269101%3AA602P613271701%3AA602P611253801%3AA602P516234601%3AA602P414259901%3AJ602P302000000%3AA602P216284701%3AA602P208205801%3AJ602P117000000%3AA602P009360501%3AA602P007272801%3AA602P003136401%3AA085P000087701%7C1429%7C0%7C1%7C2%7C2%7C4%7C4%7C0%7C%7C3%7C3%7C1%7C1%7C1%7C1%7C1%7C1%7C-1%7C0%7C0%7C2%7C2%7C0%7C0%7C0%7C3%7C0%7C3%7C1%7C3%7C0%7C1%7C0%7C0%7C0%7C0%7C1%7C1%7C0%7C1%7C1%7C0%7C0%7C1%7C0%7C4%7C0%7C1%7C1%7C11%7C20%7C1%7C2%7C1%7C0%7C0%7C0%7C1%7C4%7C0%7C1%7C1%7C41%7C2%7C51%7C60%7C0%7C1%7C0%7C0%7C1%7C4%7C0%7C2%7C0%7C71%7C0%7C0%7C1%7C71&imsi_history=460070810941213\" --compressed 'https://r.inews.qq.com/getQQNewsRemoteConfigAndroid?newFrom=icon&SubMenuVersion&targetsdk=26&uid=086D41D57A6A0000&omgid=9e10b73d91fea2471a7a365cee327364d266001021251c&trueVersion=6.1.40&qimei=864394010081091&appver=25_android_6.1.40&devid=086D41D57A6A0000&Cookie=lskey%3D;skey%3D;uin%3D;%20luin%3D;logintype%3D0;%20main_login%3D;%20&qn-sig=7664663fbcebf3a9c11adaee5213e538&qn-rid=1003_c994fb55-4d9b-46ee-bcbb-e1aa7a5420b1&qn-newsig=c959bd580cc3a943c3b940b0bf505ac97436290a4525de348c40e4cd1bcfd983'";
		//String curlCommand = "curl -H 'uin: ' -H 'Cookie: lskey=;skey=;uin=; luin=;logintype=0; main_login=;' -H 'RecentUserOperation: 2_Splash,1_news_news_top,1_news_background' -H 'Referer: http://inews.qq.com/inews/android/' -H 'User-Agent: %E8%85%BE%E8%AE%AF%E6%96%B0%E9%97%BB6140(android)' -H 'Host: r.inews.qq.com' -H 'client-ip-v4: 222.67.15.160' --data \"lon=120.585761&cityList=news_news_suz&loc_street=%E4%B8%89%E9%A6%99%E8%B7%AF&lastLocatingTime=1591271204&village_name=Unknown&loc_city_name=%E8%8B%8F%E5%B7%9E%E5%B8%82&provinceId=6&loc_catalog=%E6%9C%BA%E6%9E%84%E5%9B%A2%E4%BD%93%3A%E6%94%BF%E5%BA%9C%E6%9C%BA%E5%85%B3&loc_province_name=%E6%B1%9F%E8%8B%8F%E7%9C%81&loc_name=%E8%8B%8F%E5%B7%9E%E5%B8%82%E6%94%BF%E5%BA%9C&town_name=%E9%87%91%E9%98%8A%E8%A1%97%E9%81%93&loc_district_name=%E5%A7%91%E8%8B%8F%E5%8C%BA&loc_addr=%E6%B1%9F%E8%8B%8F%E7%9C%81%E8%8B%8F%E5%B7%9E%E5%B8%82%E5%A7%91%E8%8B%8F%E5%8C%BA%E4%B8%89%E9%A6%99%E8%B7%AF998%E5%8F%B7&user_chlid=news_news_top%2Cnews_video_top%2Cnews_news_antip%2Cnews_news_suz%2Cnews_news_recommend%2Cnews_news_ent%2Cnews_news_sports%2Cnews_news_game%2Cnews_news_mil%2Cnews_news_nba%2Cnews_news_world%2Cnews_news_tech%2Cnews_news_finance%2Cnews_news_auto%2Cnews_news_lad%2Cnews_news_astro%2Cnews_video_main%2Cnews_news_19%2Cnews_news_xperience%2Cnews_news_kepu%2Cnews_news_digi%2Cnews_news_emotion%2Cnews_news_xiaokang&lat=31.297211&cityId=39&menu_config=news_news_top%7C0%7C0%7C0%2Cnews_video_top%7C2%7C1%7C0%2Cnews_news_antip%7C2%7C2%7C0%2Cnews_news_suz%7C2%7C3%7C0%2Cnews_news_recommend%7C2%7C2%7C0%2Cnews_news_ent%7C0%7C0%7C0%2Cnews_news_sports%7C0%7C0%7C0%2Cnews_news_game%7C2%7C8%7C0%2Cnews_news_mil%7C0%7C0%7C0%2Cnews_news_nba%7C0%7C0%7C0%2Cnews_news_world%7C0%7C0%7C0%2Cnews_news_tech%7C0%7C0%7C0%2Cnews_news_finance%7C0%7C0%7C0%2Cnews_news_auto%7C0%7C0%7C0%2Cnews_news_lad%7C0%7C0%7C0%2Cnews_news_astro%7C0%7C0%7C0%2Cnews_video_main%7C0%7C0%7C0%2Cnews_news_19%7C2%7C17%7C0%2Cnews_news_xperience%7C2%7C18%7C0%2Cnews_news_kepu%7C0%7C0%7C0%2Cnews_news_digi%7C0%7C0%7C0%2Cnews_news_emotion%7C0%7C0%7C0%2Cnews_news_xiaokang%7C1%7C0%7C0&qqnetwork=wifi&real_device_width=3.0&net_bssid=00%3AFF%3AC3%3A08%3A2C%3ABB&isElderMode=0&currentChannelId=news_news_top&currentSetId=group_news&islite=0&global_session_id=1591271180635&screen_width=720&isClosePersonalized=0&imsi=460070810941213&currentTabId=news_news&net_slot=0&qn-time=1591271505325&mac=08%3A6D%3A41%3AD5%3A7A%3A6A&activefrom=icon&net_ssid=CHINA%20MOBILE&qimei=864394010081091&store=11732&origin_imei=864394010081091&network_type=wifi&origCurrentTab=top&net_apn=0&is_special_device=0&adcode=320508&mid=c774790e0565e0d88d34b08b58a0eebe36592e15&dpi=307.0&rom_type=N2G48H.G9550ZHU1AQEE&isColdLaunch=0&net_proxy=DIRECT&isMainUserLogin=0&apptype=android&hw=samsung_SM-N950N&omgbizid=36fc96d83c0fd64e7b0a545c6a44ec578cf10050215504&videoAutoPlay=1&isoem=0&cpuabi=armeabi-v7a&startTimestamp=0&pagestartfrom=icon&screen_height=1280&top_activity=SplashActivity&real_device_height=5.33&global_info=1%7C1%7C1%7C1%7C1%7C13%7C9%7C1%7C0%7C6%7C1%7C1%7C1%7C%7C0%7CJ060P700000000%3AJ060P600000000%3AJ060P400000000%3AJ060P300000000%3AJ060P200000000%3AJ060P100000000%3AJ060P090000000%3AJ060P080000000%3AJ060P070000000%3AJ060P060000000%3AJ060P050000000%3AJ060P040000000%3AJ060P030000000%3AJ060P020000000%3AJ060P010000000%3AJ060P000000000%3AA060P099302101%3AA060P016085901%3AJ403P700000000%3AJ403P600000000%3AJ403P400000000%3AB403P300415502%3AJ403P100000000%3AJ403P010000000%3AA403P000373302%3AA403P602218702%3AJ402P300000000%3AB402P100399702%3AA402P000406202%3AJ404P200000000%3AJ404P010000000%3AB404P000338902%3AA404P002308201%3AB267P300393803%3AA267P200418401%3AB267P100427703%3AJ267P090000000%3AJ267P020000000%3AJ267P010000000%3AB267P000388907%3AJ401P100000000%3AJ401P000000000%3AA064P000389004%3AJ310P400000000%3AB310P100404404%3AJ310P030000000%3AJ310P010000000%3AJ310P000000000%3AB054P400313103%3AA054P300413601%3AJ054P200000000%3AB054P100405903%3AA054P090406002%3AB054P070391803%3AA054P000399101%3AA406P200420301%3AA406P000426102%3AJ405P200000000%3AA405P100426302%3AB405P090414002%3AB405P080414102%3AB405P070415604%3AB405P060423602%3AA405P000374501%3AJ055P070000000%3AJ055P000000000%3AJ601P900000000%3AJ601P800000000%3AB601P700369702%3AB601P600338204%3AJ601P500000000%3AA601P400424101%3AJ601P300000000%3AB601P200096102%3AB601P100360803%3AJ601P000000000%3AJ601P908000000%3AJ601P907000000%3AJ601P906000000%3AJ601P905000000%3AJ601P903000000%3AA601P902266601%3AA601P815363101%3AJ601P813000000%3AJ601P812000000%3AJ601P811000000%3AJ601P704000000%3AJ601P623000000%3AA601P622269601%3AA601P620269601%3AA601P504377401%3AA601P112360801%3AJ601P111000000%3AJ601P110000000%3AA601P105118803%3AA601P022299301%3AA601P019237403%3AA601P016212405%3AJ601P006000000%3AB074P200238202%3AB602P900370104%3AJ602P700000000%3AB602P600421702%3AJ602P500000000%3AA602P400378602%3AA602P300403703%3AJ602P200000000%3AJ602P100000000%3AB602P000403802%3AA602P901257901%3AA602P710324701%3AA602P702269101%3AA602P613271701%3AA602P611253801%3AA602P516234601%3AA602P414259901%3AJ602P302000000%3AA602P216284701%3AA602P208205801%3AJ602P117000000%3AA602P009360501%3AA602P007272801%3AA602P003136401%3AA085P000087701%7C1429%7C0%7C1%7C25%7C25%7C0%7C0%7C0%7C1001%7C3%7C3%7C1%7C1%7C1%7C1%7C1%7C1%7C-1%7C0%7C0%7C2%7C2%7C0%7C0%7C0%7C3%7C0%7C3%7C1%7C3%7C0%7C1%7C0%7C0%7C0%7C0%7C1%7C1%7C0%7C1%7C1%7C0%7C0%7C1%7C0%7C4%7C0%7C1%7C1%7C11%7C20%7C1%7C2%7C1%7C0%7C0%7C0%7C1%7C4%7C0%7C1%7C1%7C41%7C2%7C51%7C60%7C0%7C1%7C0%7C0%7C1%7C4%7C0%7C2%7C0%7C71%7C0%7C0%7C1%7C71&imsi_history=460070810941213\" --compressed 'https://r.inews.qq.com/getQQNewsRemoteConfigAndroid?newFrom=icon&SubMenuVersion=55.2&targetsdk=26&uid=086D41D57A6A0000&omgid=9e10b73d91fea2471a7a365cee327364d266001021251c&trueVersion=6.1.40&qimei=864394010081091&appver=25_android_6.1.40&devid=086D41D57A6A0000&Cookie=lskey%3D;skey%3D;uin%3D;%20luin%3D;logintype%3D0;%20main_login%3D;%20&qn-sig=c9434f2337556aa63159968fb8db13ad&qn-rid=1003_17bed684-3d32-4ac6-8697-eaf1d6411f13&qn-newsig=a68c9ad9776c37f7cf9a872a37c9fd5e362d2a3aa6b4923643226261499afe5a'";
		String zhihuCommand = "curl 'https://www.zhihu.com/question/399149898/answer/1262844798' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:56.0) Gecko/20100101 Firefox/56.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2' --compressed -H 'Referer: https://www.zhihu.com/' -H 'Connection: keep-alive' -H 'Cookie: _zap=d65e2855-f52a-4817-a2e1-6b9baac5f49c; d_c0=\"ACCmrPHAGBCPTlBVca50WongWu1r9-qghA8=|1569319098\"; Hm_lvt_98beee57fd2ef70ccdd5ca52b9740c49=1590215082,1590291119,1591272812; _ga=GA1.2.837698776.1582867010; capsion_ticket=\"2|1:0|10:1591272812|14:capsion_ticket|44:MjZmMThhZWI0MmYwNDgwMjhkODBlZTNhZGJjODJjMzE=|bde0488dcfcdfdd1349e5a5e86cdee1a4eed5ae4c7b8e7ccd19fe1d7c8675fe4\"; _xsrf=bb3DT7yoQTuHOF08LKCCymQad9lhPqaX; KLBRSID=031b5396d5ab406499e2ac6fe1bb1a43|1591272973|1591272810; Hm_lpvt_98beee57fd2ef70ccdd5ca52b9740c49=1591272963; SESSIONID=D3rjYUzS6blIto55L2SHzqmgRm7aU8ltfwDCUr4IhAB; _gid=GA1.2.854982874.1591272814; JOID=VloWBULuyHD6lChmf-yD4KkmyTJprPoHn8B7HSnVrB2270pVS4QpoqafL2J1wqCawBDW6JGAqYNsdwFH41E1_Yg=; osd=W14XBE3jzHH7myVifu2M7a0nyD1kqPsGkM1_HCjaoRm37kVYT4UoraubLmN6z6SbwR_b7JCBpo5odgBI7lU0_Ic=; z_c0=\"2|1:0|10:1591272919|4:z_c0|92:Mi4xUEhWVUFnQUFBQUFBSUthczhjQVlFQ1lBQUFCZ0FsVk4xelBHWHdCWC1MNFRnV185VVFYVWJPVlZXaUJCajNjZFZR|20a417b73fe617f9c3fd24ba1c3db87a5f468dab15cfffb3a8a6fdbb148a1c70\"; unlock_ticket=\"ABBKdHIjEgkmAAAAYAJVTd_s2F5M3g-f1vqOC3mOWiC4hngxaZiU5w==\"; tst=r; _gat_gtag_UA_149949619_1=1' -H 'Upgrade-Insecure-Requests: 1' -H 'Pragma: no-cache' -H 'Cache-Control: no-cache' -H 'TE: Trailers'";
		CURLUtils curlUtils = new CURLUtils(zhihuCommand);
		PageRequest request = curlUtils.createPageRequest();
		request.putParams("over write parama name 1", "v1");//如果是post请求，你可以添加或覆盖原有的参数
		request.putHeader("over write header name 1", "v1");//你可以添加或覆盖原有的header参数
		request.setUrl("https://www.zhihu.com/question/399149898/answer/1262844799");//重新定义url

		//request.setUrl(url);
		//request.putHeader(name, value);
		DefaultHttpDownloader defaultHttpDownloader = new DefaultHttpDownloader();
		defaultHttpDownloader.download("");
		Page page = defaultHttpDownloader.download(request);
		page.getContent();//请求响应内容
		page.getContentType();//响应类型 对应 response header的content-type
		page.getOwnerUrl();//请求的url
		page.getRedirectUrl();//如果请过程中发生了302、303、304的重定向，getRedirectUrl()可以拿到重定向之后的真实url。这个功能是不是很击中了很多爬虫工程师的痛点？哈哈，继续......
		page.isRedirected();//是否发生过重定向。试问，其他的http库有没有专门为爬虫场景定义这样一个快捷的方法？没有吧。这就是爬虫工程师自己封装http库的好处，他知道你们平时用什么功能最多。把这些功能都搞成快捷方法了
		page.getResponseHeader();//得到Response的Header，Map<String, String>类型
		page.getStatus();//http响应代码，通常是200对吧
	}

}
